<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InstaResume Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --ig-primary: #fafafa;
            --ig-secondary: #efefef;
            --ig-text: #262626;
            --ig-blue: #0095f6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body {
            background-color: var(--ig-secondary);
            color: var(--ig-text);
            line-height: 1.5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--ig-text);
        }
        
        .subtitle {
            color: #8e8e8e;
            margin-bottom: 20px;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--ig-text);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .app-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .preview-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #dbdbdb;
            border-radius: 5px;
            font-size: 14px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background-color: var(--ig-blue);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #0077cc;
        }
        
        .full-width {
            width: 100%;
        }
        
        .ig-post {
            width: 375px;
            background: white;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .ig-header {
            display: flex;
            align-items: center;
            padding: 14px;
            border-bottom: 1px solid #efefef;
        }
        
        .ig-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 12px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .ig-avatar i {
            color: #999;
        }
        
        .ig-username {
            font-weight: 600;
            font-size: 14px;
        }
        
        .ig-more {
            margin-left: auto;
        }
        
        .ig-content {
            padding: 15px;
        }
        
        .ig-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .ig-title {
            color: #8e8e8e;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .ig-bio {
            margin-bottom: 15px;
            white-space: pre-line;
        }
        
        .ig-details {
            margin-bottom: 15px;
        }
        
        .ig-detail-item {
            display: flex;
            margin-bottom: 8px;
        }
        
        .ig-detail-label {
            font-weight: 600;
            min-width: 100px;
        }
        
        .ig-section-title {
            font-weight: 600;
            margin: 15px 0 5px;
        }
        
        .ig-actions {
            display: flex;
            padding: 6px 15px;
            border-top: 1px solid #efefef;
        }
        
        .ig-action {
            margin-right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        
        .ig-likes {
            padding: 0 15px;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .ig-caption {
            padding: 0 15px;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .ig-comments {
            padding: 0 15px;
            color: #8e8e8e;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .ig-timestamp {
            padding: 0 15px 10px;
            color: #8e8e8e;
            font-size: 10px;
            text-transform: uppercase;
        }
        
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .skill-tag {
            background-color: #efefef;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        .resume-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .resume-controls .form-group {
            flex: 1;
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .preview-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .preview-controls button {
            width: auto;
            padding: 8px 15px;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        
        .close, .close-modal {
            position: absolute;
            right: 15px;
            top: 10px;
            font-size: 24px;
            cursor: pointer;
        }
        
        .resume-list {
            margin-top: 15px;
        }
        
        .resume-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .resume-item h4 {
            margin-bottom: 5px;
        }
        
        .resume-item p {
            color: #8e8e8e;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .load-btn, .delete-btn {
            padding: 5px 10px;
            margin-right: 5px;
            font-size: 14px;
        }
        
        .delete-btn {
            background-color: #ff5a5f;
        }
        
        .landing-content {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .feature {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .feature i {
            font-size: 40px;
            color: #0095f6;
            margin-bottom: 15px;
        }
        
        .cta {
            margin: 40px 0;
        }
        
        .filter-clarendon {
            filter: contrast(1.2) saturate(1.35) brightness(1.1);
        }
        
        .filter-gingham {
            filter: contrast(0.95) brightness(1.05) saturate(1.1) sepia(0.2);
        }
        
        .filter-moon {
            filter: grayscale(1) contrast(1.1) brightness(1.1);
        }
        
        .filter-lark {
            filter: contrast(0.9) brightness(1.1) saturate(1.1);
        }
        
        .filter-reyes {
            filter: contrast(0.85) brightness(1.1) saturate(0.85) sepia(0.22);
        }
        
        .filter-juno {
            filter: contrast(1.15) brightness(1.15) saturate(1.8) sepia(0.35) hue-rotate(-10deg);
        }
        
        .filter-slumber {
            filter: contrast(0.95) brightness(0.95) saturate(1.8) sepia(0.35);
        }
        
        .filter-crema {
            filter: contrast(0.95) brightness(1.05) saturate(1.2) sepia(0.5);
        }
        
        .filter-ludwig {
            filter: contrast(0.95) brightness(1.05) saturate(1.7) sepia(0.25);
        }
        
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .resume-controls {
                flex-direction: column;
            }
            
            .ig-post {
                width: 100%;
                max-width: 375px;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <div class="logo">InstaResume Pro</div>
            <div class="auth-buttons" id="authButtons">
                <button id="loginBtn">Log In</button>
                <button id="signupBtn">Sign Up</button>
            </div>
            <div class="user-menu" id="userMenu" style="display: none;">
                <span id="userName"></span>
                <button id="logoutBtn">Log Out</button>
            </div>
        </nav>
        
        <header>
            <h1>Create Instagram-Style Resumes</h1>
            <p class="subtitle">Stand out with a resume that looks like an Instagram post</p>
        </header>
        
        <div class="app-container" id="appContainer">
            <!-- Content will be loaded dynamically -->
        </div>
        
        <!-- Auth Modal -->
        <div class="modal" id="authModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="authFormContainer">
                    <!-- Auth forms will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDummyAPIKeyChangeThisToYours",
            authDomain: "instaresume-pro.firebaseapp.com",
            projectId: "instaresume-pro",
            storageBucket: "instaresume-pro.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abc123def456ghi789jkl0"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Templates Data
        const templates = [
            {
                id: 'standard',
                name: 'Standard Resume',
                layout: 'standard',
                fields: [
                    { id: 'fullName', label: 'Full Name', type: 'text', required: true },
                    { id: 'jobTitle', label: 'Job Title', type: 'text', required: true },
                    { id: 'username', label: 'Instagram Username', type: 'text', required: true },
                    { id: 'bio', label: 'Professional Summary', type: 'textarea', required: true },
                    { id: 'email', label: 'Email', type: 'email', required: true },
                    { id: 'phone', label: 'Phone', type: 'tel' },
                    { id: 'location', label: 'Location', type: 'text' },
                    { id: 'education', label: 'Education', type: 'textarea' },
                    { id: 'experience', label: 'Experience', type: 'textarea' },
                    { id: 'skills', label: 'Skills (comma separated)', type: 'text' }
                ]
            },
            {
                id: 'creative',
                name: 'Creative Professional',
                layout: 'creative',
                fields: [
                    { id: 'fullName', label: 'Full Name', type: 'text', required: true },
                    { id: 'jobTitle', label: 'Creative Title', type: 'text', required: true },
                    { id: 'username', label: 'Instagram Handle', type: 'text', required: true },
                    { id: 'bio', label: 'Artist Statement', type: 'textarea', required: true },
                    { id: 'portfolio', label: 'Portfolio Link', type: 'url' },
                    { id: 'specialties', label: 'Creative Specialties', type: 'textarea' },
                    { id: 'tools', label: 'Tools & Software', type: 'text' },
                    { id: 'exhibitions', label: 'Exhibitions/Shows', type: 'textarea' }
                ]
            },
            {
                id: 'tech',
                name: 'Tech Professional',
                layout: 'tech',
                fields: [
                    { id: 'fullName', label: 'Full Name', type: 'text', required: true },
                    { id: 'jobTitle', label: 'Job Title', type: 'text', required: true },
                    { id: 'username', label: 'GitHub Username', type: 'text', required: true },
                    { id: 'bio', label: 'Professional Summary', type: 'textarea', required: true },
                    { id: 'skills', label: 'Technical Skills', type: 'textarea' },
                    { id: 'projects', label: 'Notable Projects', type: 'textarea' },
                    { id: 'certifications', label: 'Certifications', type: 'textarea' },
                    { id: 'languages', label: 'Programming Languages', type: 'text' }
                ]
            }
        ];

        // Instagram Filters
        const filters = [
            { id: 'none', name: 'No Filter' },
            { id: 'clarendon', name: 'Clarendon' },
            { id: 'gingham', name: 'Gingham' },
            { id: 'moon', name: 'Moon' },
            { id: 'lark', name: 'Lark' },
            { id: 'reyes', name: 'Reyes' },
            { id: 'juno', name: 'Juno' },
            { id: 'slumber', name: 'Slumber' },
            { id: 'crema', name: 'Crema' },
            { id: 'ludwig', name: 'Ludwig' }
        ];

        // DOM Elements
        const authButtons = document.getElementById('authButtons');
        const userMenu = document.getElementById('userMenu');
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const authModal = document.getElementById('authModal');
        const closeModal = document.querySelector('.close');
        const authFormContainer = document.getElementById('authFormContainer');
        const appContainer = document.getElementById('appContainer');

        // Initialize the app
        function initApp() {
            // Auth state listener
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    authButtons.style.display = 'none';
                    userMenu.style.display = 'flex';
                    document.getElementById('userName').textContent = user.displayName || user.email.split('@')[0];
                    loadDashboard();
                } else {
                    // User is signed out
                    authButtons.style.display = 'flex';
                    userMenu.style.display = 'none';
                    loadLandingPage();
                }
            });

            // Event listeners
            loginBtn.addEventListener('click', () => showAuthForm('login'));
            signupBtn.addEventListener('click', () => showAuthForm('signup'));
            closeModal.addEventListener('click', () => authModal.style.display = 'none');
            logoutBtn.addEventListener('click', () => auth.signOut());

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === authModal) {
                    authModal.style.display = 'none';
                }
            });
        }

        // Show auth form in modal
        function showAuthForm(type) {
            authModal.style.display = 'block';
            
            if (type === 'login') {
                authFormContainer.innerHTML = `
                    <h2>Log In</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        <button type="submit" class="full-width">Log In</button>
                    </form>
                    <p style="margin-top: 15px; text-align: center;">Don't have an account? <a href="#" id="switchToSignup">Sign up</a></p>
                `;
                
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    
                    auth.signInWithEmailAndPassword(email, password)
                        .then(() => authModal.style.display = 'none')
                        .catch(error => alert(error.message));
                });
                
                document.getElementById('switchToSignup').addEventListener('click', (e) => {
                    e.preventDefault();
                    showAuthForm('signup');
                });
            } else {
                authFormContainer.innerHTML = `
                    <h2>Sign Up</h2>
                    <form id="signupForm">
                        <div class="form-group">
                            <label for="signupName">Full Name</label>
                            <input type="text" id="signupName" required>
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password (min 6 characters)</label>
                            <input type="password" id="signupPassword" required minlength="6">
                        </div>
                        <button type="submit" class="full-width">Sign Up</button>
                    </form>
                    <p style="margin-top: 15px; text-align: center;">Already have an account? <a href="#" id="switchToLogin">Log in</a></p>
                `;
                
                document.getElementById('signupForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const name = document.getElementById('signupName').value;
                    const email = document.getElementById('signupEmail').value;
                    const password = document.getElementById('signupPassword').value;
                    
                    auth.createUserWithEmailAndPassword(email, password)
                        .then((cred) => {
                            return db.collection('users').doc(cred.user.uid).set({
                                name: name,
                                email: email,
                                createdAt: firebase.firestore.FieldValue.serverTimestamp()
                            });
                        })
                        .then(() => authModal.style.display = 'none')
                        .catch(error => alert(error.message));
                });
                
                document.getElementById('switchToLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    showAuthForm('login');
                });
            }
        }

        // Load landing page for non-authenticated users
        function loadLandingPage() {
            appContainer.innerHTML = `
                <div class="landing-content">
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-user-circle"></i>
                            <h3>User Accounts</h3>
                            <p>Save and manage multiple resumes</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-sliders-h"></i>
                            <h3>Instagram Filters</h3>
                            <p>Apply stylish filters to your resume</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-file-alt"></i>
                            <h3>Industry Templates</h3>
                            <p>Templates tailored for different careers</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-share-alt"></i>
                            <h3>Social Sharing</h3>
                            <p>Share directly to social media</p>
                        </div>
                    </div>
                    <div class="cta">
                        <h2>Ready to create your InstaResume?</h2>
                        <button id="landingSignupBtn" class="full-width">Sign Up Now - It's Free!</button>
                    </div>
                </div>
            `;
            
            document.getElementById('landingSignupBtn').addEventListener('click', () => showAuthForm('signup'));
        }

        // Load dashboard for authenticated users
        function loadDashboard() {
            appContainer.innerHTML = `
                <section class="form-section">
                    <div class="resume-controls">
                        <div class="form-group">
                            <label for="templateSelect">Choose Template</label>
                            <select id="templateSelect" class="full-width"></select>
                        </div>
                        <div class="form-group">
                            <label for="filterSelect">Apply Filter</label>
                            <select id="filterSelect" class="full-width"></select>
                        </div>
                    </div>
                    
                    <form id="resumeForm">
                        <!-- Form fields will be loaded from template -->
                    </form>
                    
                    <div class="form-actions">
                        <button id="saveResumeBtn"><i class="fas fa-save"></i> Save Resume</button>
                        <button id="loadResumeBtn"><i class="fas fa-folder-open"></i> Load Saved</button>
                    </div>
                </section>
                
                <section class="preview-section">
                    <div class="preview-controls">
                        <button id="shareFbBtn"><i class="fab fa-facebook"></i></button>
                        <button id="shareTwBtn"><i class="fab fa-twitter"></i></button>
                        <button id="shareLiBtn"><i class="fab fa-linkedin"></i></button>
                        <button id="downloadBtn"><i class="fas fa-download"></i> Download</button>
                    </div>
                    
                    <div class="ig-post-container" id="igPostContainer">
                        <!-- Instagram post will be rendered here -->
                    </div>
                </section>
            `;
            
            // Load templates and filters
            loadTemplates();
            loadFilters();
            
            // Set up event listeners
            document.getElementById('templateSelect').addEventListener('change', loadTemplateForm);
            document.getElementById('filterSelect').addEventListener('change', applyFilter);
            document.getElementById('saveResumeBtn').addEventListener('click', saveResume);
            document.getElementById('loadResumeBtn').addEventListener('click', loadSavedResumes);
            document.getElementById('downloadBtn').addEventListener('click', downloadResume);
            document.getElementById('shareFbBtn').addEventListener('click', shareToFacebook);
            document.getElementById('shareTwBtn').addEventListener('click', shareToTwitter);
            document.getElementById('shareLiBtn').addEventListener('click', shareToLinkedIn);
            
            // Load the first template by default
            loadTemplateForm();
        }

        // Load templates into the select dropdown
        function loadTemplates() {
            const select = document.getElementById('templateSelect');
            select.innerHTML = templates.map(t => `<option value="${t.id}">${t.name}</option>`).join('');
        }

        // Load filters into the select dropdown
        function loadFilters() {
            const select = document.getElementById('filterSelect');
            select.innerHTML = filters.map(f => `<option value="${f.id}">${f.name}</option>`).join('');
        }

        // Get template by ID
        function getTemplateById(id) {
            return templates.find(t => t.id === id) || templates[0];
        }

        // Load the form for the selected template
        function loadTemplateForm() {
            const templateId = document.getElementById('templateSelect').value;
            const template = getTemplateById(templateId);
            
            let formHTML = `<h2>${template.name}</h2>`;
            template.fields.forEach(field => {
                formHTML += `
                    <div class="form-group">
                        <label for="${field.id}">${field.label}</label>
                        ${field.type === 'textarea' ? 
                            `<textarea id="${field.id}" ${field.required ? 'required' : ''}>${field.default || ''}</textarea>` :
                            `<input type="${field.type}" id="${field.id}" ${field.required ? 'required' : ''} value="${field.default || ''}">`
                        }
                    </div>
                `;
            });
            
            document.getElementById('resumeForm').innerHTML = formHTML;
            document.getElementById('resumeForm').addEventListener('input', updateResumePreview);
            
            // Trigger initial preview update
            updateResumePreview();
        }

        // Update the resume preview
        function updateResumePreview() {
            const templateId = document.getElementById('templateSelect').value;
            const template = getTemplateById(templateId);
            const formData = {};
            
            template.fields.forEach(field => {
                formData[field.id] = document.getElementById(field.id).value;
            });
            
            // Render the Instagram post with the form data
            renderInstagramPost(template.layout, formData);
        }

        // Render the Instagram post
        function renderInstagramPost(layout, data) {
            let postHTML = '';
            
            switch(layout) {
                case 'standard':
                    postHTML = `
                        <div class="ig-post">
                            <div class="ig-header">
                                <div class="ig-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="ig-username">${data.username || 'yourusername'}</div>
                                <div class="ig-more">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>
                            </div>
                            
                            <div class="ig-content">
                                <div class="ig-name">${data.fullName || 'Your Name'}</div>
                                <div class="ig-title">${data.jobTitle || 'Job Title'}</div>
                                <div class="ig-bio">${data.bio || 'Professional summary goes here'}</div>
                                
                                <div class="ig-details">
                                    <div class="ig-detail-item">
                                        <div class="ig-detail-label">Email</div>
                                        <div class="ig-detail-value">${data.email || 'your.email@example.com'}</div>
                                    </div>
                                    ${data.phone ? `
                                    <div class="ig-detail-item">
                                        <div class="ig-detail-label">Phone</div>
                                        <div class="ig-detail-value">${data.phone}</div>
                                    </div>` : ''}
                                    ${data.location ? `
                                    <div class="ig-detail-item">
                                        <div class="ig-detail-label">Location</div>
                                        <div class="ig-detail-value">${data.location}</div>
                                    </div>` : ''}
                                </div>
                                
                                ${data.education ? `
                                <div class="ig-section-title">Education</div>
                                <div class="ig-bio">${data.education}</div>` : ''}
                                
                                ${data.experience ? `
                                <div class="ig-section-title">Experience</div>
                                <div class="ig-bio">${data.experience}</div>` : ''}
                                
                                ${data.skills ? `
                                <div class="ig-section-title">Skills</div>
                                <div class="skills-container">
                                    ${data.skills.split(',').map(skill => `
                                        <div class="skill-tag">${skill.trim()}</div>
                                    `).join('')}
                                </div>` : ''}
                            </div>
                            
                            <div class="ig-actions">
                                <div class="ig-action"><i class="far fa-heart"></i></div>
                                <div class="ig-action"><i class="far fa-comment"></i></div>
                                <div class="ig-action"><i class="far fa-paper-plane"></i></div>
                                <div class="ig-action" style="margin-left: auto;"><i class="far fa-bookmark"></i></div>
                            </div>
                            
                            <div class="ig-likes">1,234 likes</div>
                            <div class="ig-caption"><strong>${data.username || 'yourusername'}</strong> Check out my resume!</div>
                            <div class="ig-comments">View all 42 comments</div>
                            <div class="ig-timestamp">Just now</div>
                        </div>
                    `;
                    break;
                    
                case 'creative':
                    postHTML = `
                        <div class="ig-post">
                            <div class="ig-header">
                                <div class="ig-avatar">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="ig-username">${data.username || 'creativeuser'}</div>
                                <div class="ig-more">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>
                            </div>
                            
                            <div class="ig-content">
                                <div class="ig-name">${data.fullName || 'Creative Professional'}</div>
                                <div class="ig-title">${data.jobTitle || 'Creative Title'}</div>
                                <div class="ig-bio">${data.bio || 'Artist statement goes here'}</div>
                                
                                ${data.portfolio ? `
                                <div class="ig-detail-item">
                                    <div class="ig-detail-label">Portfolio</div>
                                    <div class="ig-detail-value">${data.portfolio}</div>
                                </div>` : ''}
                                
                                ${data.specialties ? `
                                <div class="ig-section-title">Specialties</div>
                                <div class="ig-bio">${data.specialties}</div>` : ''}
                                
                                ${data.tools ? `
                                <div class="ig-section-title">Tools</div>
                                <div class="skills-container">
                                    ${data.tools.split(',').map(tool => `
                                        <div class="skill-tag">${tool.trim()}</div>
                                    `).join('')}
                                </div>` : ''}
                                
                                ${data.exhibitions ? `
                                <div class="ig-section-title">Exhibitions/Shows</div>
                                <div class="ig-bio">${data.exhibitions}</div>` : ''}
                            </div>
                            
                            <div class="ig-actions">
                                <div class="ig-action"><i class="far fa-heart"></i></div>
                                <div class="ig-action"><i class="far fa-comment"></i></div>
                                <div class="ig-action"><i class="far fa-paper-plane"></i></div>
                                <div class="ig-action" style="margin-left: auto;"><i class="far fa-bookmark"></i></div>
                            </div>
                            
                            <div class="ig-likes">1,234 likes</div>
                            <div class="ig-caption"><strong>${data.username || 'creativeuser'}</strong> My creative portfolio</div>
                            <div class="ig-comments">View all 42 comments</div>
                            <div class="ig-timestamp">Just now</div>
                        </div>
                    `;
                    break;
                    
                case 'tech':
                    postHTML = `
                        <div class="ig-post">
                            <div class="ig-header">
                                <div class="ig-avatar">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div class="ig-username">${data.username || 'techuser'}</div>
                                <div class="ig-more">
                                    <i class="fas fa-ellipsis-h"></i>
                                </div>
                            </div>
                            
                            <div class="ig-content">
                                <div class="ig-name">${data.fullName || 'Tech Professional'}</div>
                                <div class="ig-title">${data.jobTitle || 'Tech Title'}</div>
                                <div class="ig-bio">${data.bio || 'Technical summary goes here'}</div>
                                
                                ${data.skills ? `
                                <div class="ig-section-title">Technical Skills</div>
                                <div class="ig-bio">${data.skills}</div>` : ''}
                                
                                ${data.projects ? `
                                <div class="ig-section-title">Notable Projects</div>
                                <div class="ig-bio">${data.projects}</div>` : ''}
                                
                                ${data.certifications ? `
                                <div class="ig-section-title">Certifications</div>
                                <div class="ig-bio">${data.certifications}</div>` : ''}
                                
                                ${data.languages ? `
                                <div class="ig-section-title">Languages</div>
                                <div class="skills-container">
                                    ${data.languages.split(',').map(lang => `
                                        <div class="skill-tag">${lang.trim()}</div>
                                    `).join('')}
                                </div>` : ''}
                            </div>
                            
                            <div class="ig-actions">
                                <div class="ig-action"><i class="far fa-heart"></i></div>
                                <div class="ig-action"><i class="far fa-comment"></i></div>
                                <div class="ig-action"><i class="far fa-paper-plane"></i></div>
                                <div class="ig-action" style="margin-left: auto;"><i class="far fa-bookmark"></i></div>
                            </div>
                            
                            <div class="ig-likes">1,234 likes</div>
                            <div class="ig-caption"><strong>${data.username || 'techuser'}</strong> My tech portfolio</div>
                            <div class="ig-comments">View all 42 comments</div>
                            <div class="ig-timestamp">Just now</div>
                        </div>
                    `;
                    break;
            }
            
            document.getElementById('igPostContainer').innerHTML = postHTML;
            
            // Apply any selected filter
            applyFilter();
        }

        // Apply selected Instagram filter
        function applyFilter() {
            const filterId = document.getElementById('filterSelect').value;
            const postContainer = document.getElementById('igPostContainer');
            
            // Remove all filter classes
            filters.forEach(f => {
                postContainer.classList.remove(`filter-${f.id}`);
            });
            
            // Apply selected filter
            if (filterId !== 'none') {
                postContainer.classList.add(`filter-${filterId}`);
            }
        }

        // Save resume to Firestore
        function saveResume() {
            const user = auth.currentUser;
            if (!user) return;
            
            const templateId = document.getElementById('templateSelect').value;
            const template = getTemplateById(templateId);
            const formData = {};
            
            template.fields.forEach(field => {
                formData[field.id] = document.getElementById(field.id).value;
            });
            
            db.collection('resumes').add({
                userId: user.uid,
                templateId: templateId,
                data: formData,
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => alert('Resume saved successfully!'))
            .catch(error => alert('Error saving resume: ' + error.message));
        }

        // Load saved resumes
        function loadSavedResumes() {
            const user = auth.currentUser;
            if (!user) return;
            
            db.collection('resumes')
                .where('userId', '==', user.uid)
                .orderBy('updatedAt', 'desc')
                .get()
                .then(snapshot => {
                    if (snapshot.empty) {
                        alert('No saved resumes found');
                        return;
                    }
                    
                    let html = '<h3>Your Saved Resumes</h3><div class="resume-list">';
                    snapshot.forEach(doc => {
                        const resume = doc.data();
                        html += `
                            <div class="resume-item" data-id="${doc.id}">
                                <h4>${getTemplateById(resume.templateId).name}</h4>
                                <p>Last updated: ${resume.updatedAt.toDate().toLocaleDateString()}</p>
                                <button class="load-btn" data-id="${doc.id}">Load</button>
                                <button class="delete-btn" data-id="${doc.id}">Delete</button>
                            </div>
                        `;
                    });
                    html += '</div>';
                    
                    const modal = createModal(html);
                    document.body.appendChild(modal);
                    
                    // Add event listeners to load buttons
                    document.querySelectorAll('.load-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const resumeId = this.getAttribute('data-id');
                            loadResume(resumeId);
                            document.body.removeChild(modal);
                        });
                    });
                    
                    // Add event listeners to delete buttons
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const resumeId = this.getAttribute('data-id');
                            if (confirm('Are you sure you want to delete this resume?')) {
                                db.collection('resumes').doc(resumeId).delete()
                                    .then(() => {
                                        this.parentElement.remove();
                                        if (document.querySelectorAll('.resume-item').length === 0) {
                                            document.body.removeChild(modal);
                                        }
                                    });
                            }
                        });
                    });
                });
        }

        // Load a specific resume
        function loadResume(resumeId) {
            db.collection('resumes').doc(resumeId).get()
                .then(doc => {
                    if (!doc.exists) {
                        alert('Resume not found');
                        return;
                    }
                    
                    const resume = doc.data();
                    document.getElementById('templateSelect').value = resume.templateId;
                    loadTemplateForm();
                    
                    const template = getTemplateById(resume.templateId);
                    template.fields.forEach(field => {
                        if (resume.data[field.id]) {
                            document.getElementById(field.id).value = resume.data[field.id];
                        }
                    });
                    
                    updateResumePreview();
                });
        }

        // Download resume as image
        function downloadResume() {
            const element = document.getElementById('igPostContainer');
            
            html2canvas(element, {
                scale: 2,
                logging: false,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'instagram-resume.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }

        // Social sharing functions
        function shareToFacebook() {
            alert('In a complete implementation, this would share to Facebook using the Facebook SDK');
            // FB.ui({
            //     method: 'share',
            //     href: window.location.href,
            // }, function(response){});
        }

        function shareToTwitter() {
            const text = "Check out my Instagram-style resume!";
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareToLinkedIn() {
            alert('In a complete implementation, this would share to LinkedIn using the LinkedIn API');
        }

        // Helper function to create modals
        function createModal(content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    ${content}
                </div>
            `;
            
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            return modal;
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
